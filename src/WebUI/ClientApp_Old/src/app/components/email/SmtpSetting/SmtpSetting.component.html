<br />
<div class="container">
  <div class="card">
    <div class="card-header">
      <i class="icon-note"></i>
      <strong>SMTP Server Settings</strong>
    </div>
    <div class="card-body">
      <div [formGroup]="SMTPForm">
        <div class="row">
          <div
            class="
              form-group
              required
              col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4
            "
          >
            <label class="control-label">Server:</label>
            <input type="text" class="form-control" formControlName="server" />
          </div>
          <div
            class="
              form-group
              required
              col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4
            "
          >
            <label class="control-label">Port:</label>
            <input
              type="text"
              numbersOnly
              class="form-control"
              formControlName="port"
            />
          </div>
          <div
            class="
              form-group
              required
              col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4
            "
          >
            <label class="control-label">User:</label>
            <input type="text" class="form-control" formControlName="user" />
          </div>
        </div>
        <div class="row">
          <div
            class="
              form-group
              required
              col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4
            "
          >
            <label class="control-label">Password:</label>
            <input
              type="password"
              class="form-control"
              formControlName="password"
            />
          </div>
          <div
            class="mt-4 form-group col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3"
          >
            <div class="form-check">
              <input
                class="form-check-input"
                id="chkuseSsl"
                type="checkbox"
                formControlName="useSsl"
              /><label class="form-check-label" for="chkuseSsl">
                : Use Ssl</label
              >
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer">
      <div class="form-row d-flex justify-content-start">
        <div class="col-auto form-group">
          <button
            type="button"
            title="Save Settings"
            (click)="SaveFormData()"
            [disabled]="!SMTPForm.valid"
            class="btn btn-sm btn-success"
          >
            Submit
          </button>
          <button
            type="button"
            title="Test Mail"
            [disabled]="!SMTPForm.valid"
            class="btn btn-sm btn-warning ml-2"
            (click)="openTestMailModal(template)"
          >
            Test Mail
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Check SMTP Server Settings</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modalRef?.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="testMailForm">
      <div class="form-row">
        <div class="col-lg-12 form-group required">
          <label class="control-label">Email :</label>
          <input type="text" class="form-control" formControlName="emailId" />
        </div>
      </div>
      <div class="form-row">
        <div class="col-lg-12 form-group required">
          <label class="control-label">Subject :</label>
          <input type="text" class="form-control" formControlName="subject" />
        </div>
      </div>
      <div class="form-row">
        <div class="col-lg-12 form-group required">
          <label class="control-label">Body :</label>
          <input type="text" class="form-control" formControlName="body" />
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button
      type="submit"
      (click)="SendTestMail()"
      class="btn btn-sm btn-success"
      [disabled]="!testMailForm.valid"
    >
      Send
    </button>
    <button
      type="button"
      *ngIf="!showCancel"
      (click)="modalRef?.hide()"
      class="btn btn-sm btn-warning"
    >
      Close
    </button>
  </div>
</ng-template>
